<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 2015-08-14 
 | Rendered using Apache Maven Fluido Skin 1.4
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20150814" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Apache Taverna &#x2013; Command Line Tool</title>
    <link rel="stylesheet" href="../../css/apache-maven-fluido-1.4.min.css" />
    <link rel="stylesheet" href="../../css/site.css" />
    <link rel="stylesheet" href="../../css/print.css" media="print" />

      
    <script type="text/javascript" src="../../js/apache-maven-fluido-1.4.min.js"></script>

    
    <meta name="Notice" content="Licensed to the Apache Software Foundation (ASF) under one            or more contributor license agreements.  See the NOTICE file            distributed with this work for additional information            regarding copyright ownership.  The ASF licenses this file            to you under the Apache License, Version 2.0 (the            &quot;License&quot;); you may not use this file except in compliance            with the License.  You may obtain a copy of the License at            .              http://www.apache.org/licenses/LICENSE-2.0            .            Unless required by applicable law or agreed to in writing,            software distributed under the License is distributed on an            &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY            KIND, either express or implied.  See the License for the            specific language governing permissions and limitations            under the License." />              </head>
        <body class="topBarEnabled">
          
                        
                    
                

    <div id="topbar" class="navbar navbar-fixed-top ">
      <div class="navbar-inner">
                                  <div class="container" style="width: 90%;"><div class="nav-collapse">
            
                
                                                                                <a class="brand" href="../../"  title="Apache Taverna">

                                
                                                                                                                    <img src="../../img/taverna-logo-145x134.png" alt="Apache Taverna" />
                
                </a>
                    
                                <ul class="nav">
                          <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Project <b class="caret"></b></a>
        <ul class="dropdown-menu">
        
                      <li>      <a href="../../index.html"  title="Home">Home</a>
</li>
                  
                      <li>      <a href="../../community/"  title="Community">Community</a>
</li>
                  
                      <li>      <a href="../../documentation/"  title="Documentation">Documentation</a>
</li>
                  
                      <li>      <a href="../../download/"  title="Download">Download</a>
</li>
                  
                      <li>      <a href="../../about/"  title="About us">About us</a>
</li>
                          </ul>
      </li>
                <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Introduction <b class="caret"></b></a>
        <ul class="dropdown-menu">
        
                      <li>      <a href="../../introduction/"  title="Introduction to Taverna">Introduction to Taverna</a>
</li>
                  
                      <li>      <a href="../../introduction/features"  title="Features">Features</a>
</li>
                  
                      <li>      <a href="../../introduction/why-use-workflows"  title="Why use workflows?">Why use workflows?</a>
</li>
                  
                      <li>      <a href="../../#"  title="... (TODO)">... (TODO)</a>
</li>
                          </ul>
      </li>
                <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Documentation <b class="caret"></b></a>
        <ul class="dropdown-menu">
        
                      <li>      <a href="../../documentation/"  title="Taverna docs">Taverna docs</a>
</li>
                  
                      <li>      <a href="../../documentation/glossary/"  title="Glossary">Glossary</a>
</li>
                  
                      <li>      <a href="../../documentation/scufl2/"  title="SCUFL2">SCUFL2</a>
</li>
                  
                      <li>      <a href="../../#"  title="... (TODO)">... (TODO)</a>
</li>
                          </ul>
      </li>
                <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Download <b class="caret"></b></a>
        <ul class="dropdown-menu">
        
                      <li>      <a href="../../download/"  title="Which Taverna to download?">Which Taverna to download?</a>
</li>
                  
                      <li>      <a href="../../download/language/"  title="Language">Language</a>
</li>
                  
                      <li>      <a href="../../download/workbench/"  title="Workbench">Workbench</a>
</li>
                  
                      <li>      <a href="../../download/command-line-tool/"  title="Command Line Tool">Command Line Tool</a>
</li>
                  
                      <li>      <a href="../../#"  title="... (TODO)">... (TODO)</a>
</li>
                          </ul>
      </li>
                <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Community <b class="caret"></b></a>
        <ul class="dropdown-menu">
        
                      <li>      <a href="../../community/"  title="Taverna Community">Taverna Community</a>
</li>
                  
                      <li>      <a href="../../community/lists"  title="Mailing lists">Mailing lists</a>
</li>
                  
                      <li>      <a href="../../community/contribute"  title="Contribute">Contribute</a>
</li>
                  
                      <li>      <a href="../../#"  title="... (TODO)">... (TODO)</a>
</li>
                          </ul>
      </li>
                  </ul>
          
                      <form id="search-form" action="https://www.google.com/search" method="get"  class="navbar-search pull-right" >
    
  <input value="$sitesearchValue" name="sitesearch" type="hidden"/>
  <input class="search-query" name="q" id="query" type="text" />
</form>
<script type="text/javascript" src="https://www.google.com/coop/cse/brand?form=search-form"></script>
          
                                                                            
                               <ul class="nav pull-right">
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">External Links <b class="caret"></b></a>
                <ul class="dropdown-menu">
                      <li>      <a href="https://apache.org/"  title="Apache Software Foundation">Apache Software Foundation</a>
</li>
      <li>      <a href="https://incubator.apache.org/"  title="Apache Incubator">Apache Incubator</a>
</li>
                  </ul>
              </li>
            </ul>
          
                      </div>
          
        </div>
      </div>
    </div>
    
        <div class="container">
          <div id="banner">
        <div class="pull-left">
                                                  <a href="../.././" id="bannerLeft">
                <h2>Apache Taverna</h2>
                </a>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                  <li id="publishDate">Last Published: 2015-08-14
                   </li>
                      
                
                    
      
                            </ul>
      </div>

      
                
        <div id="bodyColumn" >
                                  
            
<p>Command Line Tool is a script that runs Taverna workflows from a terminal. It comes in a form of a command line script called <i>executeworkflow</i>  (<i>executeworkflow.bat</i> on Windows and <i>executeworkflow.sh</i> on Linux/UNIX).</p>
<p>You can <a href="/download/command-line-tool">download the Command Line Tool</a> from the Taverna Web site  or use the <i>executeworkflow.sh</i> or <i>executeworkflow.bat</i> that comes  bundled with the Taverna Workbench installation.</p>

<ul>
  
<li><a class="externalLink" href="http://dev.mygrid.org.uk/wiki/display/tav250/Extended+version">Extended version</a></li>
</ul>
<div class="section">
<h2><a name="aimginformation.pngWhat_is_the_difference_between_the_bundled_and_standalone_executeworkflow"></a>![](/img/information.png)What is the difference between the bundled and standalone executeworkflow?</h2>

<ul>
  
<li>
<p>The standalone command line tool has a <b>separate configuration</b>  <a class="externalLink" href="http://dev.mygrid.org.uk/wiki/display/tav250/Taverna+home+directory">home directory</a>,  called <i>taverna-cmdline-2.x.x</i> - while the bundled tool uses the same configuration from  <i>taverna</i> as the Taverna Workbench.</p></li>
  
<li>
<p>Any <a class="externalLink" href="http://dev.mygrid.org.uk/wiki/display/tav250/HTTP+proxy+preferences">proxy settings</a>  have to be configured manually - copy  <i>conf/HttpProxy-B307A902-F292-4D2F-B8E7-00CC983982B6.config</i> from a configured  Workbench home directory.</p></li>
  
<li>
<p>The bundled tool will load all the <b>plugins</b> installed for the workbench,  including third-party plugins.  However it will also load various GUI-supporting functions which might consume extra memory.</p></li>
  
<li>
<p>To install service plugins for the command line tool, one will have to manually edit the  <i>plugins/plugins.xml</i> of the installation or home directory.  The <i>&#x2026; </i> block can be copied from the <i>plugins/plugins.xml</i> from  the <a class="externalLink" href="http://dev.mygrid.org.uk/wiki/display/tav250/Taverna+home+directory">home directory</a>  of a Workbench installation where the plugin is installed.</p></li>
  
<li>
<p>The standalone installation and download is smaller than the workbench - but keeping both  installed will use more disk space.  (Note: the command line tool could use the {repository}} folder from the workbench using  symlinks or modifiying <i>plugins/plugins.xml</i></p></li>
  
<li>
<p>The standalone tool can easily be installed and used on remote servers without GUI access.</p></li>
  
<li>
<p>Running the embedded tool with the database and provenance enabled allows the command line  runs to show up in the workbench  &#x201c;<a class="externalLink" href="http://dev.mygrid.org.uk/wiki/display/tav250/Result+Perspective">Workflow runs</a>&#x201d;.</p></li>
  
<li>
<p>On the other hand the tool will have to use <i>-clientserver</i> if the workbench is already  running, or if shut down either a standalone <i>-startdb</i> database server process or  <i>-embedded</i>.</p></li>
  
<li>
<p>The standalone tool would not be in conflict with the database of the workbench  (as it&#x2019;s in a different home directory) - but could be in conflict with parallel runs of  the command line tool - in which case a separate <i>-startdb</i> process should be started with  the other calls using <i>-clientserver</i> - see  <a href="#CommandLineTool-Runningthescriptwithdatabase">#Running the script with database</a></p></li>
</ul></div>
<div class="section">
<h2><a name="Executeworkflow_Script"></a>Executeworkflow Script</h2>
<p>To get help and a full set of options for the executeworkflow script type the following in the  command prompt:</p>

<blockquote>
<p>$ sh executeworkflow.sh -help</p>
</blockquote>
<p>It will give the following usage options:</p>

<div class="source">
<div class="source"><pre class="prettyprint">usage: executeworkflow [options] [workflow]
 -clientserver                           Connect as a client to a derby
                                         server instance.
 -cmdir &lt;directory path&gt;                 Absolute path to a directory
                                         where Credential Manager's files
                                         (keystore and truststore) are
                                         located.
 -cmpassword                             Indicate that the master password
                                         for Credential Manager will be
                                         provided on standard input.
 -dbproperties &lt;filename&gt;                Load a properties file to
                                         configure the database.
 -embedded                               Connect to an embedded Derby
                                         database. This can prevent
                                         mulitple invocations.
 -help                                   Display comprehensive help
                                         information.
 -inmemory                               Run the workflow with data stored
                                         in-memory rather than in a
                                         database. This can give
                                         performance inprovements, at the
                                         cost of overall memory usage.
 -inputdelimiter &lt;inputname delimiter&gt;   Cause an inputvalue or inputfile
                                         to be split into a list according
                                         to the delimiter. The associated
                                         workflow input must be expected
                                         to receive a list.
 -inputdoc &lt;document&gt;                    Load inputs from a Baclava
                                         document.
 -inputfile &lt;inputname filename&gt;         Load the named input from file or
                                         URL.
 -inputvalue &lt;inputname value&gt;           Directly use the value for the
                                         named input.
 -logfile &lt;filename&gt;                     The logfile to which more verbose
                                         logging will be written to.
 -outputdir &lt;directory&gt;                  Save outputs as files in
                                         directory, default is to make a
                                         new directory
                                         workflowName_output.
 -outputdoc &lt;document&gt;                   Save outputs to a new Baclava
                                         document.
 -port &lt;portnumber&gt;                      The port that the database is
                                         running on. If set requested to
                                         start its own internal server,
                                         this is the start port that will
                                         be used.
 -provbundle &lt;file&gt;                      Save provenance/trace of workflow
                                         execution as Research Object zip
                                         bundle to &lt;file&gt; specified.
 -provenance                             Generate provenance information
                                         and store it in the database.
 -startdb                                Automatically start an internal
                                         Derby database server.

</pre></div></div>
<p>If this directory already exists then an new directory is created, and appended with  <tt>_n</tt>, where <tt>n</tt> is incremented to the next available index.</p>
<p>Results are written out to files named after the output port for that result. If a result is composed of lists, then a directory is created for the output port and  individual list items are named after the list element index (with 1 being the first index). The the output is the result of an error, the filename is appended with &#x2018;.error&#x2019;.</p>
<p>You can provide your own output directory with the <i>-outputdir</i> option. There will be an error if the directory already exists.</p>
<p>You can  <a class="externalLink" href="http://dev.mygrid.org.uk//wiki/display/tav250/Provenance+export+to+OPM+and+Janus">export the provenance</a>  using the <i>-opm</i> or <i>-janus</i> options.</p>
<p>You can also record your results to a Baclava document using <i>-outputdoc</i> option. The document will be overwritten if it already exists. You can use the <a class="externalLink" href="http://dev.mygrid.org.uk/wiki/display/tav250/DataViewer+Tool">DataViewer Tool</a>  to view Baclava files.</p>
<p>Inputs can be provided in three ways. Both <i>-inputfile</i> and <i>-inputvalue</i> options can be used together; <i>-inputdoc</i> option must be  used on its own. <i>-inputfile</i> and <i>-inputvalue</i> options both take two additional arguments, the name of the port  for the input, and either a file containing the input data, or the input value itself  respectively.</p>
<p>If one of more of you workflow inputs is described as a list, you can create a list by using  the <i>-inputdelimiter</i> option, which may be used with either <i>-inputfile</i> or  <i>-inputvalue</i>. This option takes two parameters &#x2013; an input name and the delimiter by which to split the input  into a list.</p>
<p>The delimiter may be a simple character, such as a comma or a new-line character,  or a regular expression. The input string, or file, will then be converted into a list being split by the delimiter  specified.</p>
<p>If a list of greater depth (i.e. a list or lists or deeper) is required then you will need to  use the <i>-inputdocoption</i> to pass data from a Baclava file. However, if you provide an input of lower depth to that required, then it will automatically be  wrapped in one or more lists up to the required depth. Providing an input of greater depth than that required will result in an error.</p>
<div class="section">
<h3><a name="Running_the_script_with_database"></a>Running the script with database</h3>
<p>If a workflow has a high memory requirement, then it may be better to run it using a database  to store data rather than storing it in memory, which is the default option. There are three options for using a database:</p>

<ul>
  
<li><i>-embedded</i> option, runs with an embedded database.  This is slightly faster than -clientserver option (below), but has the limitation that only  one <i>executeworkflow</i> script may be executed simultaneously.</li>
  
<li><i>-clientserver</i> option allows the workflow to be executed backed by the database running as  a server.  By default a database is not started for you, but may be started using <i>-startdb</i> option.</li>
  
<li><i>-startdb</i> option starts a database. It may be used without providing a workflow to allow  a database to be started separately, allowing multiple simultaneous <i>executeworkflow</i>  script runs.</li>
</ul>
<p>More advanced database configurations can be specified using <i>-dbproperties</i> option,  allowing you to take full control over the database used. This takes a second argument, the filename of the propeties file, for which the following  example contains the default settings used:</p>

<div>
<pre>
in_memory = true
provenance = false
connector = derby
port = 1527
dialect = org.hibernate.dialect.DerbyDialect
start_derby = false
driver = org.apache.derby.jdbc.EmbeddedDriver
jdbcuri = jdbc:derby:t2-database;create=true;upgrade=true
</pre></div>
<p>If you want to run the Derby database with client/server setting instead of with the embedded  driver, change the properties in the <i>-dbproperties</i> file (described above) as follows:</p>

<div>
<pre>
driver=org.apache.derby.jdbc.ClientDriver
start_derby=true
</pre></div>
<p>If you wish to run your own separate Derby server instance, then do not define the  <i>start_derby</i> option and define the port on which you are running you Derby server as  <i>port=&lt;port&gt;</i>.</p>
<p>If you want to use MySQL database rather than Derby, first you need to drop the  mysql-connector-java-5.1.5.jar file from the  <a class="externalLink" href="http://dev.mysql.com/downloads/connector/j/">mySQL</a> website into the lib folder of the  Taverna installation directory (Taverna installation directory if where you are running the  script from).</p>
<p>You need to edit the <i>-dbproperties</i> file as follows:</p>

<div>
<pre>
connector=mysql
jdbcuri=jdbc:mysql://localhost/T2Provenance
dialect=org.hibernate.dialect.MySQLDialect
driver=com.mysql.jdbc.Driver
username=&lt;username&gt;
password=&lt;password&gt;
port=&lt;port&gt;
</pre></div>
<p>It is essential that the database name in the <i>jdbcuri</i> property is T2Provenance,  as this database is hard-coded into the MySQL provenance SQL queries.</p>
<p>If you do not specify the port, the script will try to connect to the default port for MySQL  server, which is 3306.</p>

<blockquote>
<p>![](/img/warning.png) When using <i>-dbproperties</i> together with other options, the other options take precedence.</p>
</blockquote></div></div>
<div class="section">
<h2><a name="Examples"></a>Examples</h2>
<p>Some examples on how the script can be invoked are shown below.</p>

<blockquote>
<p>$ sh executeworkflow.sh &quot;/Users/alex/Taverna Workflows/wf-1.t2flow&quot;</p>
</blockquote>
<p>The above line executes the workflow located in <i>/Users/alex/Taverna Workflows/wf-1.t2flow</i>  that has no inputs and uses the memory for data storage (the default option). Make sure to enclose the file path in quotes if it contains spaces. The <i>&lt;workflowName&gt;_outputdirectory</i> will be created in the current directory and outputs  will be written to it.</p>

<blockquote>
<p>$ sh executeworkflow.sh -embedded -inputvalue in1 aaa -inputvalue in2 &quot;bb b&quot; -outputdir /tmp/wf-2/ wf-2.t2flow</p>
</blockquote>
<p>The above line executes the workflow <i>wf-2.t2flow</i> from the current directory passing the value  &#x201c;aaa&#x201d; to the input port <i>in1</i> and value &#x201c;bb b&#x201d; to the input port <i>in2</i>. If input values contain spaces make sure to enclose them in quotes. Uses the embedded Derby database to store the data. Outputs will be written to the <i>/tmp/wf-2/</i> directory.</p>

<blockquote>
<p>$ sh executeworkflow.sh -inputvalue in1 aaa -inputfile in2 input2.txt -inputdelimiter in2 &quot;\n&quot; wf-3.t2flow</p>
</blockquote>
<p>The above line executes the workflow <i>wf-3.t2flow</i> from the current directory passing the value  &#x201c;aaa&#x201d; to the input port <i>in1</i> and splitting the content of file <i>input2.txt</i> using &#x201c;\n&#x201d;  (new line character) as the delimiter and passing the resulting list to the input port <i>in2</i>. Make sure to out the delimiter in quotes, even if it is just a single character, like &#x201c;;&#x201d;. The <i>&lt;workflowName&gt;_outputdirectory</i> will be created in the current directory and outputs  will be written to it.</p>

<blockquote>
<p>$ sh executeworkflow.sh -inputdoc /tmp/input-doc.xml -outputdoc /tmp/output-doc.xml &quot;/Users/alex/Taverna Workflows/wf-4.t2flow&quot;</p>
</blockquote>
<p>The above line executes the workflow <i>/Users/alex/Taverna Workflows/wf-4.t2flow</i>, loading  inputs from the Baclava document in <i>/tmp/input-doc.xml</i>, and writing the outputs to a  Baclava document <i>/tmp/output-doc.xml</i>.</p></div>
                  </div>
          </div>

    <hr/>

    <footer>
            <div class="container">
                      <div class="row">
                                      <p >Copyright &copy;                    2015
                        <a href="http://www.apache.org/">The Apache Software Foundation</a>.
            All rights reserved.      
                    
      </p>
                </div>

                <p id="poweredBy" class="pull-right">
                                                                                                                <a href="http://maven.apache.org/" title="Maven" class="builtBy">
        <img class="builtBy"  alt="Maven" src="http://maven.apache.org/images/logos/maven-feather.png"    />
      </a>
                  </p>
        
                </div>
    </footer>
        </body>
</html>
