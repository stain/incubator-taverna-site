<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 2015-08-14 
 | Rendered using Apache Maven Fluido Skin 1.4
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20150814" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Apache Taverna &#x2013; Releasing Apache Taverna</title>
    <link rel="stylesheet" href="../css/apache-maven-fluido-1.4.min.css" />
    <link rel="stylesheet" href="../css/site.css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />

      
    <script type="text/javascript" src="../js/apache-maven-fluido-1.4.min.js"></script>

    
    <meta name="Notice" content="Licensed to the Apache Software Foundation (ASF) under one            or more contributor license agreements.  See the NOTICE file            distributed with this work for additional information            regarding copyright ownership.  The ASF licenses this file            to you under the Apache License, Version 2.0 (the            &quot;License&quot;); you may not use this file except in compliance            with the License.  You may obtain a copy of the License at            .              http://www.apache.org/licenses/LICENSE-2.0            .            Unless required by applicable law or agreed to in writing,            software distributed under the License is distributed on an            &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY            KIND, either express or implied.  See the License for the            specific language governing permissions and limitations            under the License." />              </head>
        <body class="topBarEnabled">
          
                        
                    
                

    <div id="topbar" class="navbar navbar-fixed-top ">
      <div class="navbar-inner">
                                  <div class="container" style="width: 90%;"><div class="nav-collapse">
            
                
                                                                                <a class="brand" href="../"  title="Apache Taverna">

                                
                                                                                                                    <img src="../img/taverna-logo-145x134.png" alt="Apache Taverna" />
                
                </a>
                    
                                <ul class="nav">
                          <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Project <b class="caret"></b></a>
        <ul class="dropdown-menu">
        
                      <li>      <a href="../index.html"  title="Home">Home</a>
</li>
                  
                      <li>      <a href="../community/"  title="Community">Community</a>
</li>
                  
                      <li>      <a href="../documentation/"  title="Documentation">Documentation</a>
</li>
                  
                      <li>      <a href="../download/"  title="Download">Download</a>
</li>
                  
                      <li>      <a href="../about/"  title="About us">About us</a>
</li>
                          </ul>
      </li>
                <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Introduction <b class="caret"></b></a>
        <ul class="dropdown-menu">
        
                      <li>      <a href="../introduction/"  title="Introduction to Taverna">Introduction to Taverna</a>
</li>
                  
                      <li>      <a href="../introduction/features"  title="Features">Features</a>
</li>
                  
                      <li>      <a href="../introduction/why-use-workflows"  title="Why use workflows?">Why use workflows?</a>
</li>
                  
                      <li>      <a href="../#"  title="... (TODO)">... (TODO)</a>
</li>
                          </ul>
      </li>
                <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Documentation <b class="caret"></b></a>
        <ul class="dropdown-menu">
        
                      <li>      <a href="../documentation/"  title="Taverna docs">Taverna docs</a>
</li>
                  
                      <li>      <a href="../documentation/glossary/"  title="Glossary">Glossary</a>
</li>
                  
                      <li>      <a href="../documentation/scufl2/"  title="SCUFL2">SCUFL2</a>
</li>
                  
                      <li>      <a href="../#"  title="... (TODO)">... (TODO)</a>
</li>
                          </ul>
      </li>
                <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Download <b class="caret"></b></a>
        <ul class="dropdown-menu">
        
                      <li>      <a href="../download/"  title="Which Taverna to download?">Which Taverna to download?</a>
</li>
                  
                      <li>      <a href="../download/language/"  title="Language">Language</a>
</li>
                  
                      <li>      <a href="../download/workbench/"  title="Workbench">Workbench</a>
</li>
                  
                      <li>      <a href="../download/command-line-tool/"  title="Command Line Tool">Command Line Tool</a>
</li>
                  
                      <li>      <a href="../#"  title="... (TODO)">... (TODO)</a>
</li>
                          </ul>
      </li>
                <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Community <b class="caret"></b></a>
        <ul class="dropdown-menu">
        
                      <li>      <a href="../community/"  title="Taverna Community">Taverna Community</a>
</li>
                  
                      <li>      <a href="../community/lists"  title="Mailing lists">Mailing lists</a>
</li>
                  
                      <li>      <a href="../community/contribute"  title="Contribute">Contribute</a>
</li>
                  
                      <li>      <a href="../#"  title="... (TODO)">... (TODO)</a>
</li>
                          </ul>
      </li>
                  </ul>
          
                      <form id="search-form" action="https://www.google.com/search" method="get"  class="navbar-search pull-right" >
    
  <input value="$sitesearchValue" name="sitesearch" type="hidden"/>
  <input class="search-query" name="q" id="query" type="text" />
</form>
<script type="text/javascript" src="https://www.google.com/coop/cse/brand?form=search-form"></script>
          
                                                                            
                               <ul class="nav pull-right">
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">External Links <b class="caret"></b></a>
                <ul class="dropdown-menu">
                      <li>      <a href="https://apache.org/"  title="Apache Software Foundation">Apache Software Foundation</a>
</li>
      <li>      <a href="https://incubator.apache.org/"  title="Apache Incubator">Apache Incubator</a>
</li>
                  </ul>
              </li>
            </ul>
          
                      </div>
          
        </div>
      </div>
    </div>
    
        <div class="container">
          <div id="banner">
        <div class="pull-left">
                                                  <a href=".././" id="bannerLeft">
                <h2>Apache Taverna</h2>
                </a>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                  <li id="publishDate">Last Published: 2015-08-14
                   </li>
                      
                
                    
      
                            </ul>
      </div>

      
                
        <div id="bodyColumn" >
                                  
            
<p>Anyone in the <a href="/community/">Apache Taverna community</a> can propose a release, although usually a release is prepared by one of the <a href="/about/">committers</a>. This page describes the procedure for preparing and voting over a release.</p>

<blockquote>
<p>Release early, release often</p>
</blockquote>
<p><b>Note</b>: This page is still a <i>draft</i> under development. See <a class="externalLink" href="https://issues.apache.org/jira/browse/TAVERNA-812">TAVERNA-812</a> for tasks required for a release.</p>
<div class="section">
<h2><a name="Preparations"></a>Preparations</h2>

<ul>
  
<li>Email <a class="externalLink" href="mailto:dev@taverna">dev@taverna</a> to say a release is imminent. This gives the community a chance to finish up anything they want to get into the next release.</li>
  
<li>Check Jira for <a class="externalLink" href="https://issues.apache.org/jira/browse/TAVERNA">issues</a> on the corresponding <a class="externalLink" href="https://issues.apache.org/jira/browse/TAVERNA/?selectedTab=com.atlassian.jira.jira-projects-plugin:components-panel">components</a>. If you find any that are blocking or in progress, consult with the <a class="externalLink" href="mailto:dev@taverna">dev@taverna</a> list first.</li>
</ul>
<div class="section">
<h3><a name="Prepare_your_build_machine"></a>Prepare your build machine</h3>
<p>You need to build and release Apache Taverna from a machine you have control over. Make sure you have a recent version of <tt>java</tt> and <tt>mvn</tt>:</p>

<div class="source">
<div class="source"><pre class="prettyprint">stain@biggie-utopic:~/src/taverna$ java -version
openjdk version &quot;1.8.0_45-internal&quot;
OpenJDK Runtime Environment (build 1.8.0_45-internal-b14)
OpenJDK 64-Bit Server VM (build 25.45-b02, mixed mode)

stain@biggie-utopic:~/src/taverna$ mvn -version
Apache Maven 3.3.1 (cab6659f9874fa96462afef40fcf6bc033d58c1c; 2015-03-13T20:10:27+00:00)
Maven home: /home/stain/software/maven
Java version: 1.8.0_45-internal, vendor: Oracle Corporation
Java home: /usr/lib/jvm/java-8-openjdk-amd64/jre
Default locale: en_GB, platform encoding: UTF-8
OS name: &quot;linux&quot;, version: &quot;3.19.0-18-generic&quot;, arch: &quot;amd64&quot;, family: &quot;unix&quot;
</pre></div></div>
<p>Then let&#x2019;s have a clean Maven Repository to ensure the build works out of the box.</p>

<div class="source">
<div class="source"><pre class="prettyprint">cd ~/.m2/
mv repository repository-old
rm -rf repository-old &amp;
</pre></div></div>
<p>Similarly we&#x2019;ll check out freshly from git to a new folder, to ensure uncommitted files are not being included in the release. For the examples below, we&#x2019;ll create and use <tt>~/src/rc1</tt> as the working directory.</p>

<div class="source">
<div class="source"><pre class="prettyprint">mkdir rc1
cd rc1
</pre></div></div></div>
<div class="section">
<h3><a name="GPG_keys"></a>GPG keys</h3>
<p>You need to have <tt>gpg</tt> and preferably a <i>GPG Agent</i> installed on the machine you will build the release on. This needs to be configured with your <a class="externalLink" href="https://www.apache.org/dev/release-signing.html">GPG release key</a>.</p>
<p>Check that the Apache Taverna <a class="externalLink" href="https://dist.apache.org/repos/dist/release/incubator/taverna/KEYS">KEYS</a> file contains your correct key and fingerprint. If not, then:</p>
<p>Find your PGP fingerprint:</p>

<div class="source">
<div class="source"><pre class="prettyprint">stain@biggie-utopic:~/src/rc1/dist$ gpg --fingerprint stain@apache.org
pub   1024D/A0FFD119 2002-01-20
Key fingerprint = DDDE E876 12E9 FB95 F5C8  D91E 4110 63A3 A0FF D119
uid                  Stian Soiland-Reyes &lt;stian@soiland-reyes.com&gt;
uid                  Stian Soiland &lt;stian@soiland.no&gt;
uid                  Stian Soiland &lt;stain@nvg.org&gt;
uid                  Stian Soiland &lt;stain@soiland.no&gt;
uid                  [jpeg image of size 9477]
uid                  Stian Soiland &lt;stain@s11.no&gt;
uid                  Stian Soiland-Reyes &lt;soiland-reyes@cs.manchester.ac.uk&gt;
uid                  Stian Soiland-Reyes &lt;stain@apache.org&gt;
sub   4096R/4BBAC7C6 2014-06-05 [expires: 2016-06-10]
</pre></div></div>
<p>Edit your details on <a class="externalLink" href="https://id.apache.org/">id.apache.org</a> to provide your <i>OpenPGP Public Key Primary Fingerprint</i>, e.g.:</p>

<div class="source">
<div class="source"><pre class="prettyprint">DDDE E876 12E9 FB95 F5C8  D91E 4110 63A3 A0FF D119
</pre></div></div>
<p>Now verify that the <a class="externalLink" href="https://people.apache.org/keys/group/taverna.asc">people.apache.org taverna.asc</a> file now includes the correct key fingerprint, and update on dist:</p>

<div class="source">
<div class="source"><pre class="prettyprint">svn co https://dist.apache.org/repos/dist/release/incubator/taverna/
cd taverna
wget https://people.apache.org/keys/group/taverna.asc
cat KEYS.template taverna.asc &gt; KEYS
rm taverna.asc  
svn commit -m &quot;Updated KEYS&quot; KEYS
</pre></div></div></div>
<div class="section">
<h3><a name="Fresh_checkouts"></a>Fresh checkouts</h3>
<p>Then we&#x2019;ll clone the Taverna git repositories that we are going to release. Be sure to clone using the <i>Apache Committer</i> URLs, as found on the <a href="repositories">/download/code/</a> page:</p>

<div class="source">
<div class="source"><pre class="prettyprint">git clone https://git-wip-us.apache.org/repos/asf/incubator-taverna-maven-parent.git
git clone https://git-wip-us.apache.org/repos/asf/incubator-taverna-language.git
</pre></div></div>
<p>Note that you do not need to clone the repositories which are already released and which don&#x2019;t form part of this release.</p></div></div>
<div class="section">
<h2><a name="Git_config"></a>Git config</h2>
<p>Make sure that each new checkout have the correct user name information and your <tt>@apache.org</tt> email address:</p>

<div class="source">
<div class="source"><pre class="prettyprint">cd incubator-taverna-maven-parent
git config user.name &quot;Your Name&quot;
git config user.email you@apache.org

cd ../incubator-taverna-language
git config user.name &quot;Your Name&quot;
git config user.email you@apache.org
</pre></div></div>
<div class="section">
<h3><a name="Verify_build"></a>Verify build</h3>
<p>Now we&#x2019;ll make sure they build normally, <i>pass all the tests</i> and complete with <tt>BUILD SUCCESS</tt>:</p>

<div class="source">
<div class="source"><pre class="prettyprint">mvn clean verify
</pre></div></div>
<p>Note that this would download all the <i>dependencies</i> from Maven Central.</p></div>
<div class="section">
<h3><a name="Maven_repository_access"></a>Maven repository access</h3>
<p>When releasing a stable version, Maven will deploy to Apache&#x2019;s <a class="externalLink" href="https://repository.apache.org">Maven repository</a>, a Nexus instance. Here, a <i>staging repository</i> will be automatically created.</p>
<p>Ensure you can log in to the Nexus instance before performing a release.</p>
<p>To provide the Nexus credentials, edit your <tt>~/.m2/settings.xml</tt> to include your apache.org committer credentials:</p>

<div class="source">
<div class="source"><pre class="prettyprint">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;settings xsi:schemaLocation=&quot;http://maven.apache.org/SETTINGS/1.1.0 http://maven.apache.org/xsd/settings-1.1.0.xsd&quot; xmlns=&quot;http://maven.apache.org/SETTINGS/1.1.0&quot;
xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&gt;
  &lt;servers&gt;
    &lt;server&gt;
      &lt;id&gt;apache.snapshots.https&lt;/id&gt;
      &lt;username&gt;johndoe&lt;/username&gt;
      &lt;password&gt;fishsoup&lt;/password&gt;
    &lt;/server&gt;
    &lt;server&gt;
      &lt;id&gt;apache.releases.https&lt;/id&gt;
      &lt;username&gt;johndoe&lt;/username&gt;
      &lt;password&gt;fishsoup&lt;/password&gt;
    &lt;/server&gt;
  &lt;/servers&gt;
&lt;/settings&gt;
</pre></div></div>
<p>To check you have the correct credentials set up for write-access to <a class="externalLink" href="https://repository.apache.org/content/repositories/snapshots/org/apache/taverna/">Apache&#x2019;s Maven repository</a>, deploy the current SNAPSHOT:</p>

<div class="source">
<div class="source"><pre class="prettyprint">mvn deploy
</pre></div></div>
<p>This is best tested with a small repository like <tt>taverna-maven-parent</tt> as it will perform a build.</p></div>
<div class="section">
<h3><a name="Closing_old_staging_repositories"></a>Closing old staging repositories</h3>
<p>Check the list of open <a class="externalLink" href="https://repository.apache.org/#stagingRepositories">Staging Repositories</a> on the Nexus instance, and Close/Drop any old <tt>orgapachetaverna-*</tt> repositories. Do not touch the other repositories from other projects.</p></div></div>
<div class="section">
<h2><a name="Creating_release_candidate"></a>Creating release candidate</h2>
<div class="section">
<h3><a name="Figure_out_release_order"></a>Figure out release order</h3>
<p>If more than one git repository needs to be released, e.g. because the newer SNAPSHOT version is needed, then those repositories needs to be released in incremental order. The dependency order is generally from top to bottom of the list on the <a href="/download/code">code download page</a>, e.g. <tt>taverna-language</tt> before <tt>taverna-engine</tt> before <tt>taverna-workbench</tt>.</p></div>
<div class="section">
<h3><a name="Fix_versions"></a>Fix versions</h3>
<p>Edit the top-level <tt>pom.xml</tt> of each project to release, ensuring there are no <tt>-SNAPSHOT</tt> dependencies in its <tt>&lt;parent&gt;</tt> and <tt>&lt;properties&gt;</tt>.</p>
<p><b>Do not fix</b> the <tt>&lt;version&gt;</tt> of the Maven project itself or its submodules, as they must be on the form <tt>*-SNAPSHOT</tt> in order for the Maven Release Plugin to modify them.</p>
<p>Check if a newer <tt>taverna-maven-parent</tt> or other <tt>taverna.*.version</tt> dependencies are needed. This is usually indicated by depending on an unreleased SNAPSHOT version. Accordingly, after the release process, do <i>not</i> update <tt>master</tt> to use the bumped SNAPSHOT versions, as that would wrongly indicate that a newer dependency is needed.</p>
<p>For compile/test purposes, update all <tt>taverna.*.version</tt> properties to the <i>latest released version</i>.</p>
<p>Exception to the rule: - when OSGi backwards-compatibility is needed, e.g. an updated wsdl-activity that should work also with an older taverna-engine-api release.</p>
<p>Remember that in OSGi, as long as we follow semantic versioning and don&#x2019;t break API compatibility, an upstream dependency can be updated without forcing an update release of its downstream users.</p>
<p>If you are updating <tt>taverna-maven-parent</tt>, then try to update this to the latest <a class="externalLink" href="http://central.maven.org/maven2/org/apache/apache/">Apache super-pom</a> - be aware that this could change Maven build settings.</p>
<p>Commit your <tt>pom.xml</tt> changes (if any) and push.</p>

<div class="source">
<div class="source"><pre class="prettyprint">git commit -m &quot;Dependency updates for release 1.2.3&quot; pom.xml
git push
</pre></div></div></div>
<div class="section">
<h3><a name="Prepare_release_candidate"></a>Prepare release candidate</h3>
<p>We use the <a class="externalLink" href="https://maven.apache.org/maven-release/maven-release-plugin/">Maven release plugin</a> to release candidates as it ensures a consistent release process:</p>

<div class="source">
<div class="source"><pre class="prettyprint">mvn release:prepare
</pre></div></div>
<p><b>Note:</b> Maven will use <tt>gpg</tt> to tag and sign the artifacts - so you might want to install and configure a <b>GPG Agent</b> to avoid repeatedly providing your GPG passphrase.</p>
<p>The defaults for &#x201c;What is the release version for&#x201d; is usually good (assuming the SNAPSHOT version has been correctly bumped for any major/minor/patch changes to the code), but check the <a href="#Version_numbers">policy for version numbers below</a>.</p>

<div class="source">
<div class="source"><pre class="prettyprint">[INFO] Checking dependencies and plugins for snapshots ...
What is the release version for &quot;Apache Taverna Language APIs (Scufl2, Databundle)&quot;? (org.apache.taverna.language:taverna-language) 0.15.0-incubating: :
What is the release version for &quot;Apache Taverna Baclava support&quot;? (org.apache.taverna.language:taverna-baclava-language) 0.15.0-incubating: :
What is the release version for &quot;Apache Taverna Scufl 2 UCF Package&quot;? (org.apache.taverna.language:taverna-scufl2-ucfpackage) 0.15.0-incubating: :
What is the release version for &quot;Apache Taverna Scufl 2 API&quot;? (org.apache.taverna.language:taverna-scufl2-api) 0.15.0-incubating: :
</pre></div></div>
<p>You will be asked for each submodule what version they should have - generally their version should be the same as their parent (except to explicitly allow API backward compatibility)</p>
<p><b>Note</b>: Take care to use the correct version number if preparing a second release candidate, as Maven could suggest a higher version number based on the bumped <tt>-SNAPSHOT</tt> version. </p>
<p><b>Important</b>: If maven prompts for the development parent version remember to set it to *-incubating-SNAPSHOT (where * is what is now in the parent pom). If you forget this then please reset it manually in the pom and commit manually after the release has been deployed. If the parent version is set wrong then it can lead to build issues in jenkins etc. </p>
<div class="section">
<h4><a name="Version_numbers"></a>Version numbers</h4>

<ul>
  
<li>Has to end in <tt>-incubating</tt> (while Apache Taverna is incubating)</li>
  
<li>taverna-maven-parent is versioned with just major version, e.g. <tt>4-incubating</tt></li>
  
<li>All other repositories use <a class="externalLink" href="http://semver.org/spec/v2.0.0.html">Semantic Versioning 2.0.0</a>, e.g. <tt>2.13.1-incubating</tt></li>
</ul>
<p>Semantic versioning summary:</p>

<blockquote>
<p>Given a version number MAJOR.MINOR.PATCH, increment the:</p>
  
<ul>
    
<li>MAJOR version when you make incompatible API changes,</li>
    
<li>MINOR version when you add functionality in a backwards-compatible manner, and</li>
    
<li>PATCH version when you make backwards-compatible bug fixes.</li>
  </ul>
</blockquote>
<p>Use <tt>git diff</tt> against the previous release tag for a rough check for changes.</p>

<div class="source">
<div class="source"><pre class="prettyprint">git diff 0.15.0-incubating-RC2
</pre></div></div>
<p>Note that as we use of OSGi, the public Java API is usually just what is exposed by the <tt>*-api</tt> modules, meaning that implementatoin changes normally should just warrant a new patch version. We should also consider indirect APIs, such as an Activity&#x2019;s expected JSON configuration or the REST API of the Taverna Server. </p>
<p>Check with <a class="externalLink" href="mailto:dev@taverna">dev@taverna</a> if you are not sure. Usually bumping minor (e.g. from <tt>1.5.2</tt> to <tt>1.6.0</tt>) is the right option, as we release all modules in the git repository.</p></div>
<div class="section">
<h4><a name="Tagging_and_next_SNAPSHOT_version"></a>Tagging and next SNAPSHOT version</h4>
<p>For the tag, use the proposed format (<tt>0.15.0-incubating-RC1</tt>), but modify <tt>-RC1</tt> for any subsequent release candidates.</p>

<div class="source">
<div class="source"><pre class="prettyprint">What is SCM release tag or label for &quot;Apache Taverna Language APIs (Scufl2, Databundle)&quot;? (org.apache.taverna.language:taverna-language) 0.15.0-incubating-RC1: :
</pre></div></div>
<p><b>Module-specific release</b>: If a hot-patch update of a particular Maven module is being released from within its subfolder, then prefix the tag-name with the module name, e.g. <tt>taverna-scufl2-t2flow-0.15.1-incubating-RC1</tt>. Note that preparing a single module release requires careful consideration for setting the <tt>&lt;parent&gt;</tt> and <tt>&lt;dependency&gt;</tt> versions and should generally be avoided.</p>
<p>The next development version should usually be one <i>patch version</i> higher, or for taverna-maven-parent simply the next number:</p>

<div class="source">
<div class="source"><pre class="prettyprint">What is the new development version for &quot;Apache Taverna Language APIs (Scufl2, Databundle)&quot;? (org.apache.taverna.language:taverna-language) 0.15.1-incubating-SNAPSHOT: :
What is the new development version for &quot;Apache Taverna Baclava support&quot;? (org.apache.taverna.language:taverna-baclava-language) 0.15.1-incubating-SNAPSHOT: :
What is the new development version for &quot;Apache Taverna Scufl 2 UCF Package&quot;? (org.apache.taverna.language:taverna-scufl2-ucfpackage) 0.15.1-incubating-SNAPSHOT: :
What is the new development version for &quot;Apache Taverna Scufl 2 API&quot;? (org.apache.taverna.language:taverna-scufl2-api) 0.15.1-incubating-SNAPSHOT: :
</pre></div></div>
<p>Maven will now transform your poms, create the tag, and push changes back to Apache&#x2019;s git repository.</p>
<p>If you abort, you can start the process again using <tt>mvn release:prepare</tt>, which will pick up your answers so far from the file <tt>release.profiles</tt>.</p></div>
<div class="section">
<h4><a name="Rolling_back"></a>Rolling back</h4>
<p>If anything goes wrong at this stage, you will need to undo, edit and commit required changes, and start again:</p>

<div class="source">
<div class="source"><pre class="prettyprint">mvn release:rollback
vi foo/pom.xml
git commit
mvn release:prepare
</pre></div></div></div></div>
<div class="section">
<h3><a name="Deploying_the_release_candidate"></a>Deploying the release candidate</h3>
<p>If the preparation was successful, then you should now be able to do:</p>

<div class="source">
<div class="source"><pre class="prettyprint">mvn release:perform
</pre></div></div>
<p>This will check out the tag, build it, then sign and deploy the packaged source code and compiled JARs to <tt>repository.apache.org</tt>.</p></div>
<div class="section">
<h3><a name="Locate_the_staging_repository"></a>Locate the staging repository</h3>
<p>On Apache&#x2019;s Nexus instance, locate the <a class="externalLink" href="https://repository.apache.org/#stagingRepositories">Staging Repository</a> for the code you just released. It should be called something like <tt>orgapachetaverna-1001</tt> &#x2013; check the <i>Updated</i> time stamp and click to verify its <i>Content</i>.</p>
<p>You can leave the staging repository <i>Open</i> until you have released all the projects that will form part of this <i>[VOTE]</i>, e.g. you can deploy both <tt>taverna-maven-parent</tt> and <tt>taverna-language</tt> using the same staging repository.</p>
<p><b>Important</b> - When all artifacts to be deployed are in the staging repository, tick the box next to it and click <i>Close</i>.</p>
<p><b>DO NOT CLICK RELEASE YET</b> - the release candidate must pass <i>[VOTE]</i> emails on both <a class="externalLink" href="mailto:dev@taverna">dev@taverna</a> and <a class="externalLink" href="mailto:general@incubator">general@incubator</a> before we release.</p>
<p>Once closing has finished (check with <i>Refresh</i>), browse to the <i>URL</i> of the <a class="externalLink" href="https://repository.apache.org/content/repositories">staging repository</a> which should be something like <tt>https://repository.apache.org/content/repositories/orgapachetaverna-1003/</tt></p></div>
<div class="section">
<h3><a name="Uploading_to_dist.apache.org"></a>Uploading to dist.apache.org</h3>
<p>The release candidate source code, checksums and signatures should be uploaded to <a class="externalLink" href="https://dist.apache.org/repos/dist/dev/incubator/taverna/">dist.apache.org</a> using <tt>svn</tt> - which we&#x2019;ll check out to a new folder <tt>~/src/rc1/dist</tt>:</p>

<div class="source">
<div class="source"><pre class="prettyprint">svn co https://dist.apache.org/repos/dist/dev/incubator/taverna dist
</pre></div></div>
<p>The <tt>source</tt> folder should normally be empty &#x2013; if you find remains of an earlier RC that is not still under <i>[VOTE]</i>, first remove them with <tt>svn rm</tt>:</p>

<div class="source">
<div class="source"><pre class="prettyprint">cd dist/source
svn rm *
</pre></div></div>
<p>Now go back to the <i>dist</i> directory. Retrieve the source archives from the staging repository by looking for <tt>-*source-release.zip</tt> (not <tt>sources.jar</tt>!) in the staging repository, located under the folder corresponding to the groupID and artifactId of the top-level project, e.g. <tt>org/apache/taverna/language/0.15.0-incubating/</tt> containing <tt>taverna-language-0.15.0-incubating-source-release.zip</tt></p>
<p>For consistency checking you also need to include the PGP signature <tt>.asc</tt> and the checksums <tt>.sha1</tt> and <tt>.md5</tt></p>
<p>Here&#x2019;s a convenient <tt>wget</tt> command to get all the release archives, their checksums and signatures:</p>

<div class="source">
<div class="source"><pre class="prettyprint">wget -e robots=off --recursive --no-parent --no-directories -A &quot;*-source-release*&quot; https://repository.apache.org/content/repositories/orgapachetaverna-1002/org/apache/taverna/
</pre></div></div>
<p>Make sure you have not got any extra files in your <tt>dist/</tt> folders, like <tt>index.html</tt> or duplicates like <tt>*.zip.1</tt>. You can delete any files ending in <tt>.asc.md5</tt>.</p>

<div class="source">
<div class="source"><pre class="prettyprint">stain@biggie-utopic:~/src/rc1/dist$  ls
binaries/ source/
taverna-language-0.15.0-incubating-source-release.zip      taverna-language-0.15.0-incubating-source-release.zip.sha1  taverna-parent-1-incubating-source-release.zip.md5
taverna-language-0.15.0-incubating-source-release.zip.asc  taverna-parent-1-incubating-source-release.zip          taverna-parent-1-incubating-source-release.zip.sha1
taverna-language-0.15.0-incubating-source-release.zip.md5  taverna-parent-1-incubating-source-release.zip.asc
</pre></div></div>
<p>Under <tt>source/</tt>, make a corresponding versioned folder for each product, and <i>include the RC number</i>, avoiding confusion in case you need to make a second release candidate:</p>

<div class="source">
<div class="source"><pre class="prettyprint">mkdir source/taverna-language-0.15.0-incubating-RC2
mkdir source/taverna-parent-1-incubating-RC2
mv *language*release* source/taverna-language-0.15.0-incubating-RC2
mv *parent*release* source/taverna-parent-1-incubating-RC2
</pre></div></div>
<p>Now add them to the <tt>source</tt> folder with <tt>svn add</tt> and <tt>svn commit</tt></p>

<div class="source">
<div class="source"><pre class="prettyprint">svn add taverna-language-0.15.0-incubating-RC1 taverna-parent-1-incubating-RC1
svn commit -m &quot;taverna-language 0.15.0-incubating-RC1&quot;
</pre></div></div>
<p>If any binary distributions are also be provided from the <a href="/download">Download page</a> (e.g. Taverna Workbench installers and Taverna Server <tt>war</tt>s), then download them as well <i>from the staging repository</i> and add them under equivalent versioned folders in <tt>binaries/</tt>, including their corresponding <tt>.asc</tt>, <tt>.md5</tt> and <tt>.sha1</tt> files,</p>
<p>Versioned folders make it easier to tidy up after a dropped release candidate, and easier to promote the release.</p>
<p>Now verify that the files are available on <a class="externalLink" href="https://dist.apache.org/repos/dist/dev/incubator/taverna/">https://dist.apache.org/repos/dist/dev/incubator/taverna/</a> - you might need a <i>Refresh</i> in the browser.</p></div></div>
<div class="section">
<h2><a name="Voting"></a>Voting</h2>
<p>Any Apache release must be approved through a <a class="externalLink" href="http://www.apache.org/foundation/voting.html">vote</a> of the project&#x2019;s PMC. As Apache Taverna is an incubating project, a Taverna release must be approved by both the <a href="/about">Apache Taverna PPMC</a> and the <a class="externalLink" href="http://incubator.apache.org/guides/ppmc.html">Apache Incubator IPMC</a>.</p>
<p>Before an Apache Taverna release can be distributed, it must thus pass two stages:</p>

<ul>
  
<li>[VOTE] on <a class="externalLink" href="mailto:dev@taverna">dev@taverna</a></li>
  
<li>[VOTE] on <a class="externalLink" href="mailto:general@incubator">general@incubator</a></li>
</ul>
<p>Each of the <i>[VOTE]</i> threads should be open for <b>at least 72 hours</b>, allowing time for sufficient <a href="#Reviewing">review</a>, and catering for differences in holidays and timezones.</p>
<p>Including 24 hours grace period for the download mirrors, this means a release takes a minimum of a week before a release candidate might be published and released.</p>
<p>Anyone in the <a href="/community">community</a> can participate in the review and vote, not just PMC members or committers. Only votes from IPMC members are <b>binding</b>.</p>
<div class="section">
<h3><a name="Vote_email_to_devtaverna"></a>Vote email to <a class="externalLink" href="mailto:dev@taverna">dev@taverna</a></h3>
<p>To start the release vote, modify the below example and send to <a class="externalLink" href="mailto:dev@taverna">dev@taverna</a>. Remember <tt>[VOTE]</tt> in the subject line and change the version number to match the release candidate.</p>
<p>Subject: [VOTE] Release Apache Taverna Language 0.15.0-incubating RC2</p>
<p>I am pleased to be calling this vote for the source release of</p>
<p>Apache Taverna Maven Parent 1-incubating  Apache Taverna Language 0.15.0-incubating</p>
<p>Apache Taverna Language is a set of APIs for workflow definitions (SCUFL2) and workflow inputs/outputs/run (DataBundle), as consumed and produced by the Apache Taverna workflow system. The API includes support for working with Research Object Bundles, and loading/saving Taverna workflows in different formats.</p>
<p>The release candidates to be voted over are available at:</p>
<p><a class="externalLink" href="https://dist.apache.org/repos/dist/dev/incubator/taverna/source/taverna-parent-1-incubating-RC2/">https://dist.apache.org/repos/dist/dev/incubator/taverna/source/taverna-parent-1-incubating-RC2/</a>  <a class="externalLink" href="https://dist.apache.org/repos/dist/dev/incubator/taverna/source/taverna-language-0.15.0-incubating-RC2/">https://dist.apache.org/repos/dist/dev/incubator/taverna/source/taverna-language-0.15.0-incubating-RC2/</a></p>
<p>SHA-1 checksums:  8199880048a59cde622e0caa24c3bc3d83bc5d5a taverna-parent-1-incubating-source-release.zip  7032e9d2be834f7c029aae562b62613481bf6939 taverna-language-0.15.0-incubating-source-release.zip</p>
<p>MD5 checksums:  7f9b107b9f1dc0407783ac0ad484d6ea taverna-parent-1-incubating-source-release.zip  35d3085b596b2dd4b30a0234259efade taverna-language-0.15.0-incubating-source-release.zip</p>
<p>Build the release candidate in the above order, using:</p>

<div class="source">
<div class="source"><pre class="prettyprint">mvn clean install
</pre></div></div>
<p>The release candidates correspond to the following git commits:</p>
<p><a class="externalLink" href="https://git-wip-us.apache.org/repos/asf?p=incubator-taverna-maven-parent.git;a=commit;h=3ba669c78782d3fc3b548e2a512d201ee922b34a">https://git-wip-us.apache.org/repos/asf?p=incubator-taverna-maven-parent.git;a=commit;h=3ba669c78782d3fc3b548e2a512d201ee922b34a</a>  <a class="externalLink" href="https://git-wip-us.apache.org/repos/asf?p=incubator-taverna-language.git;a=commit;h=3340e2090e604b40ac0b88675f57c1d12032d060">https://git-wip-us.apache.org/repos/asf?p=incubator-taverna-language.git;a=commit;h=3340e2090e604b40ac0b88675f57c1d12032d060</a></p>
<p>Release candidates are signed with a GPG key available at:</p>
<p><a class="externalLink" href="https://dist.apache.org/repos/dist/release/incubator/taverna/KEYS">https://dist.apache.org/repos/dist/release/incubator/taverna/KEYS</a></p>
<p>A staged Maven repository is available for review at:</p>
<p><a class="externalLink" href="https://repository.apache.org/content/repositories/orgapachetaverna-1003/">https://repository.apache.org/content/repositories/orgapachetaverna-1003/</a></p>
<p>The changelog for this release is available from JIRA:</p>
<p><a class="externalLink" href="https://issues.apache.org/jira/secure/ReleaseNote.jspa?projectId=12318322&amp;version=12332247">https://issues.apache.org/jira/secure/ReleaseNote.jspa?projectId=12318322&amp;version=12332247</a>  <a class="externalLink" href="https://issues.apache.org/jira/secure/ReleaseNote.jspa?projectId=12318322&amp;version=12332246">https://issues.apache.org/jira/secure/ReleaseNote.jspa?projectId=12318322&amp;version=12332246</a></p>
<p>Please vote on releasing these packages as:</p>
<p>Apache Taverna Maven Parent 1-incubating  Apache Taverna Language 0.1.0-incubating</p>
<p>The vote is open for at least 72 hours and passes if a majority of at least three +1 Apache Taverna PPMC votes are cast.</p>
<p>[ ] +1 Release this package [ ] 0 I don&#x2019;t feel strongly about it, but don&#x2019;t object [ ] -1 Do not release this package because&#x2026;</p>
<p>Anyone can participate in testing and voting, not just committers, please feel free to try out the release candidate and provide your votes.</p></div>
<div class="section">
<h3><a name="Discuss_email_to_devtaverna"></a>Discuss email to <a class="externalLink" href="mailto:dev@taverna">dev@taverna</a></h3>
<p>It is also recommended to start the discussion around the release candidate with a separate thread with subject </p>
<p>[DISCUSS]: Release Apache Taverna Language 0.15.0-incubating RC2 </p>
<p>Remember to change the version number as appropriate for the release candidate.</p></div>
<div class="section">
<h3><a name="Tallying_the_vote"></a>Tallying the vote</h3></div>
<div class="section">
<h3><a name="Vote_email_to_generalincubator"></a>Vote email to <a class="externalLink" href="mailto:general@incubator">general@incubator</a></h3></div></div>
<div class="section">
<h2><a name="Dropping_a_release_candidate"></a>Dropping a release candidate</h2>
<p>If a release candidate is to be dropped, e.g. it fails the <i>[VOTE]</i>, then:</p>
<p>In Nexus, tick the <a class="externalLink" href="https://repository.apache.org/#stagingRepositories">staging repository</a> and <i>Drop</i>.</p>
<p>Delete the old tag:</p>

<div class="source">
<div class="source"><pre class="prettyprint">git push origin :0.15.0-incubating-RC1
</pre></div></div>
<p>Roll back the SNAPSHOT version number:</p>

<div class="source">
<div class="source"><pre class="prettyprint">mvn release:update-versions -DautoVersionSubmodules=true -DdevelopmentVersion=0.15.0-incubating-SNAPSHOT`
</pre></div></div>
<p>In your <tt>dist</tt> checkout, <tt>svn rm</tt> the dropped RC folders:</p>

<div class="source">
<div class="source"><pre class="prettyprint">svn rm *RC*
</pre></div></div></div>
<div class="section">
<h2><a name="Distributing"></a>Distributing</h2>
<p>Once a <i>[VOTE] [Results]</i> email has been agreed on <a class="externalLink" href="mailto:general@incubator">general@incubator</a>, then:</p>

<ul>
  
<li>Promote the release candidate to a release</li>
</ul>
<div class="section">
<h3><a name="Moving_to_release_area"></a>Moving to release area</h3>
<p>Use full URL <tt>svn mv</tt> to move the accepted release candidate to the <tt>release</tt> folder structure on dist.apache.org, e.g. at <a class="externalLink" href="https://dist.apache.org/repos/dist/release/incubator/taverna/source/">https://dist.apache.org/repos/dist/release/incubator/taverna/source/</a> but remember to remove the <tt>-RC1</tt> from the folder name.</p>

<div class="source">
<div class="source"><pre class="prettyprint">svn mv https://dist.apache.org/repos/dist/dev/incubator/taverna/source/taverna-language-0.15.0-incubating-RC2 https://dist.apache.org/repos/dist/release/incubator/taverna/source/taverna-language-0.15.0-incubating -m &quot;Releasing apache taverna-language-0.15.0-incubating&quot;
svn mv https://dist.apache.org/repos/dist/dev/incubator/taverna/source/taverna-parent-1-incubating-RC2 https://dist.apache.org/repos/dist/release/incubator/taverna/source/taverna-parent-1-incubating -m &quot;Releasing apache taverna-parent-1-incubating&quot;
</pre></div></div></div>
<div class="section">
<h3><a name="Update_download_page"></a>Update download page</h3>
<p>Wait 24 hours for the download mirrors to pick up the new release from <tt>dist.apache.org</tt>.</p>
<p>TODO.</p></div>
<div class="section">
<h3><a name="Removing_old_versions"></a>Removing old versions</h3>
<p>TODO</p></div>
<div class="section">
<h3><a name="Releasing_Maven_repository"></a>Releasing Maven repository</h3>
<p>Tick the correct <a class="externalLink" href="https://repository.apache.org/#stagingRepositories">staging repository</a> (perhaps do a quick check of an SHA1 sum against the vote email), then click <i>Release</i>. It should then propagate to <a class="externalLink" href="https://repository.apache.org/content/repositories/releases/org/apache/taverna/">Apache&#x2019;s release Maven repository</a> and eventually mirrored to <a class="externalLink" href="http://central.maven.org/maven2/org/apache/taverna/">Maven Central</a>.</p></div></div>
                  </div>
          </div>

    <hr/>

    <footer>
            <div class="container">
                      <div class="row">
                                      <p >Copyright &copy;                    2015
                        <a href="http://www.apache.org/">The Apache Software Foundation</a>.
            All rights reserved.      
                    
      </p>
                </div>

                <p id="poweredBy" class="pull-right">
                                                                                                                <a href="http://maven.apache.org/" title="Maven" class="builtBy">
        <img class="builtBy"  alt="Maven" src="http://maven.apache.org/images/logos/maven-feather.png"    />
      </a>
                  </p>
        
                </div>
    </footer>
        </body>
</html>
